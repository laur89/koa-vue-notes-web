<template>
      <div>
            <!-- This tmpl based on TradingVueJs 101 (example from 'Getting Started' ) -->
            <trading-vue :id="'chart-view-' + this.algoId"
                         class='chart-view'
                         ref="tradingVue"
                         :gap_collapse="2"
                         :data="chart" :width="width" :height="height"
                         :title-txt="this.chartName"
                         :toolbar="true"
                         :color-back="colors.colorBack"
                         :color-grid="colors.colorGrid"
                         :color-text="colors.colorText">
            ></trading-vue>
            <span class="night-mode">
                  <input type="checkbox" v-model="night">
                  <label>NM</label>
            </span>
      </div>
</template>

<script>
      import {TradingVue, DataCube} from 'trading-vue-js';
      import { isEmpty } from 'lodash-es';
      import { mapMutations, mapState } from 'vuex';
      //import Data from '../../../static-data/data.json'

      /**
       * Returns the element height including margins
       *
       * TODO: move out to utils class
       * @param element - element
       * @returns {number}
       */
      const outerHeight = element => {
            const height = element.offsetHeight,
                    style = window.getComputedStyle(element);

            return ['top', 'bottom']
                    .map(side => parseInt(style[`margin-${side}`]))
                    .reduce((total, side) => total + side, height)
      };

      export default {
            name: 'charts',
            components: {TradingVue},
            methods: {
                  onResize() {
                        this.width = window.innerWidth;
                        this.height = this.getHeight();
                  },
                  getHeight() {
                        //return window.innerHeight - 100 - 76;  // 100 is tied to footer; 76 seems to be hdr 56 +20 padding?
                        let i = window.innerHeight - outerHeight(this.navbar);
                        if (this.showFooter) i -= this.footer.offsetHeight;

                        return i;
                  },
                  notify(msg) {
                        this.$toasted.show(msg,  {
                              theme: "toasted-primary",
                              position: "top-right",
                              //icon: 'check',
                              duration : 5000
                        });
                  },
                  async getTail() {
                        try {
                              const data = await this.$store.dispatch(
                                      'chart/getChartTail',
                                      {
                                            id: this.algoId,
                                            span: 60000 * 1000 // TODO find a way to define; perhaps function of shown area, and maybe also decide part on backend based on default TF?
                                      }
                              );

                              this.chartName = data.chart.chartName;
                              delete data.chart.chartName;

                              return data;
                        } catch (error) {
                              this.$toasted.error(`getTail: there was an error connecting to the server: ${error}`);
                        }
                  },
                  async getSlice(anchorTime, numberOfDataPoints, direction, tf, cb) {
                        try {
                              //return {"meta":{"markers":["isEnd"]},"chart":{"type":"Candles","chartName":"Our chart name from api","settings":{},"data":[[1561646700000,1.13638,1.13654,1.136365,1.136525,0],[1561646760000,1.13652,1.136605,1.13642,1.136515,0],[1561646820000,1.13651,1.13683,1.13648,1.136825,0],[1561646880000,1.13683,1.137035,1.136795,1.136815,0],[1561646940000,1.13681,1.13681,1.13661,1.13661,0],[1561647000000,1.136615,1.13676,1.136535,1.13675,0],[1561647060000,1.136755,1.136945,1.13668,1.13693,0],[1561647120000,1.136925,1.136995,1.13677,1.13689,0],[1561647180000,1.136895,1.13724,1.13676,1.137105,0],[1561647240000,1.1371,1.137245,1.13698,1.137215,0],[1561647300000,1.13721,1.13725,1.137085,1.137095,0],[1561647360000,1.1371,1.13728,1.13709,1.137215,0],[1561647420000,1.13722,1.137375,1.1372,1.13735,0],[1561647480000,1.137345,1.137345,1.136805,1.13681,0],[1561647540000,1.136695,1.136935,1.136675,1.13683,0],[1561647600000,1.136835,1.13693,1.13668,1.13693,0],[1561647660000,1.13694,1.13702,1.13684,1.136875,0],[1561647720000,1.13688,1.136965,1.136655,1.136735,0],[1561647780000,1.13674,1.136955,1.136715,1.136715,0],[1561647840000,1.13672,1.13679,1.13663,1.136745,0],[1561647900000,1.13676,1.136895,1.13676,1.136885,0],[1561647960000,1.13689,1.13699,1.136825,1.136855,0],[1561648020000,1.13685,1.13694,1.136765,1.136775,0],[1561648080000,1.13678,1.136805,1.1367,1.1367,0],[1561648140000,1.136695,1.136745,1.13644,1.13648,0],[1561648200000,1.136485,1.13654,1.136455,1.136475,0],[1561648260000,1.13643,1.136515,1.136305,1.13647,0],[1561648320000,1.136465,1.136645,1.13642,1.136645,0],[1561648380000,1.13664,1.13664,1.136455,1.136545,0],[1561648440000,1.13655,1.1366,1.13637,1.13648,0],[1561648500000,1.136475,1.13649,1.13636,1.136445,0],[1561648560000,1.13645,1.1365,1.13621,1.136265,0],[1561648620000,1.13626,1.13635,1.13625,1.13631,0],[1561648680000,1.136315,1.13645,1.136315,1.136345,0],[1561648740000,1.13635,1.136685,1.13635,1.136685,0],[1561648800000,1.13668,1.136735,1.136455,1.13668,0],[1561648860000,1.136675,1.136765,1.136615,1.136645,0],[1561648920000,1.13664,1.136645,1.136525,1.136575,0],[1561648980000,1.13657,1.13681,1.13648,1.136805,0],[1561649040000,1.13681,1.13692,1.136715,1.136825,0],[1561649100000,1.13683,1.13684,1.13669,1.136815,0],[1561649160000,1.13681,1.136865,1.136635,1.136645,0],[1561649220000,1.136655,1.136705,1.13657,1.13664,0],[1561649280000,1.136635,1.136735,1.1366,1.136715,0],[1561649340000,1.13671,1.136735,1.13667,1.136695,0],[1561649400000,1.13669,1.136705,1.13656,1.136565,0],[1561649460000,1.13656,1.136755,1.136535,1.13672,0],[1561649520000,1.136715,1.13684,1.136665,1.13684,0],[1561649580000,1.136845,1.137015,1.136835,1.13691,0],[1561649640000,1.136905,1.136965,1.136885,1.136955,0],[1561649700000,1.13695,1.137155,1.136945,1.137135,0],[1561649760000,1.13713,1.13713,1.136955,1.137,0],[1561649820000,1.136995,1.136995,1.136755,1.136785,0],[1561649880000,1.13679,1.136955,1.136735,1.136865,0],[1561649940000,1.13687,1.1371,1.136835,1.13708,0],[1561650000000,1.137075,1.13713,1.13702,1.1371,0],[1561650060000,1.137095,1.137195,1.13707,1.13715,0],[1561650120000,1.137155,1.13729,1.13715,1.13728,0],[1561650180000,1.137285,1.1373,1.13722,1.137235,0],[1561650240000,1.13723,1.137275,1.13702,1.13705,0],[1561650300000,1.137045,1.13709,1.137025,1.137085,0],[1561650360000,1.13709,1.137295,1.13709,1.1372,0],[1561650420000,1.137195,1.137275,1.137155,1.137275,0],[1561650480000,1.13728,1.137285,1.137165,1.13728,0],[1561650540000,1.137255,1.137315,1.1372,1.1373,0],[1561650600000,1.137305,1.137395,1.137295,1.137355,0],[1561650660000,1.13735,1.137355,1.13726,1.13731,0],[1561650720000,1.137315,1.13732,1.13724,1.137285,0],[1561650780000,1.13728,1.13738,1.137235,1.13735,0],[1561650840000,1.137355,1.137365,1.137285,1.137335,0],[1561650900000,1.13734,1.13749,1.137335,1.137405,0],[1561650960000,1.1374,1.1374,1.137275,1.137305,0],[1561651020000,1.1373,1.13732,1.13724,1.13728,0],[1561651080000,1.137285,1.137285,1.137105,1.137135,0],[1561651140000,1.13714,1.13716,1.137055,1.13709,0],[1561651200000,1.137095,1.13713,1.13705,1.137125,0],[1561651260000,1.13713,1.13718,1.13701,1.13701,0],[1561651320000,1.137015,1.137025,1.136835,1.13688,0],[1561651380000,1.136905,1.136985,1.136885,1.136985,0],[1561651440000,1.13698,1.13702,1.136885,1.136915,0],[1561651500000,1.13692,1.136925,1.136665,1.136665,0],[1561651560000,1.13667,1.136785,1.13662,1.13664,0],[1561651620000,1.136635,1.136785,1.136635,1.136715,0],[1561651680000,1.13672,1.136835,1.13672,1.136795,0],[1561651740000,1.1368,1.13683,1.13676,1.13679,0],[1561651800000,1.136785,1.13682,1.13677,1.136815,0],[1561651860000,1.13682,1.136825,1.136705,1.13681,0],[1561651920000,1.136815,1.136825,1.13673,1.13679,0],[1561651980000,1.136785,1.13682,1.136665,1.136675,0],[1561652040000,1.136665,1.136715,1.136645,1.136655,0],[1561652100000,1.13666,1.13673,1.136655,1.136695,0],[1561652160000,1.13669,1.13685,1.136665,1.13677,0],[1561652220000,1.13677,1.136825,1.13676,1.1368,0],[1561652280000,1.136795,1.136805,1.13669,1.136695,0],[1561652340000,1.13669,1.13669,1.13654,1.136615,0],[1561652400000,1.13662,1.13664,1.13649,1.136515,0],[1561652460000,1.13652,1.136635,1.136515,1.136555,0],[1561652520000,1.13655,1.13655,1.136455,1.13648,0],[1561652580000,1.136475,1.136505,1.13643,1.136435,0],[1561652640000,1.136425,1.136455,1.13638,1.136415,0],[1561652700000,1.13641,1.136445,1.136385,1.136385,0],[1561652760000,1.13639,1.136545,1.136295,1.13654,0],[1561652820000,1.136535,1.136535,1.136475,1.136485,0],[1561652880000,1.13649,1.13651,1.13639,1.136435,0],[1561652940000,1.13643,1.136595,1.136415,1.136585,0],[1561653000000,1.13659,1.13664,1.136415,1.13644,0],[1561653060000,1.136435,1.136595,1.13641,1.13655,0],[1561653120000,1.136545,1.136575,1.13653,1.13653,0],[1561653180000,1.136535,1.136565,1.1365,1.13653,0],[1561653240000,1.136525,1.136535,1.1365,1.1365,0],[1561653300000,1.13651,1.13659,1.13651,1.13659,0],[1561653360000,1.136585,1.13671,1.136585,1.136705,0],[1561653420000,1.1367,1.136715,1.136635,1.136705,0],[1561653480000,1.13671,1.13679,1.136685,1.13674,0],[1561653540000,1.136735,1.136795,1.136655,1.13672,0],[1561653600000,1.136725,1.136775,1.1367,1.136745,0],[1561653660000,1.13674,1.13679,1.136695,1.13671,0],[1561653720000,1.136715,1.136775,1.1367,1.13677,0],[1561653780000,1.136765,1.13677,1.136605,1.136615,0],[1561653840000,1.13661,1.13669,1.1366,1.136665,0],[1561653900000,1.13667,1.136735,1.136625,1.1367,0],[1561653960000,1.136705,1.13674,1.136685,1.13673,0],[1561654020000,1.136725,1.136795,1.136725,1.136795,0],[1561654080000,1.1368,1.136945,1.136785,1.13693,0],[1561654140000,1.136935,1.13694,1.13691,1.13693,0],[1561654200000,1.13694,1.136975,1.136925,1.13693,0],[1561654260000,1.13694,1.13705,1.136925,1.13693,0],[1561654320000,1.136925,1.136945,1.136845,1.13687,0],[1561654380000,1.136865,1.136905,1.13674,1.13675,0],[1561654440000,1.136755,1.13676,1.136715,1.136715,0],[1561654500000,1.136705,1.13671,1.136665,1.13668,0],[1561654560000,1.136675,1.13673,1.136675,1.136725,0],[1561654620000,1.13672,1.136785,1.13672,1.136775,0],[1561654680000,1.13678,1.136785,1.136715,1.136725,0],[1561654740000,1.136735,1.136755,1.136575,1.136645,0],[1561654800000,1.13664,1.13666,1.13661,1.13663,0],[1561654860000,1.136625,1.136685,1.1366,1.136665,0],[1561654920000,1.13667,1.13677,1.13667,1.13673,0],[1561654980000,1.136725,1.13675,1.13665,1.136695,0],[1561655040000,1.1367,1.136745,1.13669,1.13669,0],[1561655100000,1.136685,1.13674,1.136685,1.136725,0],[1561655160000,1.13673,1.136785,1.13669,1.136705,0],[1561655220000,1.1367,1.1367,1.136555,1.136555,0],[1561655280000,1.13656,1.13667,1.136555,1.136655,0],[1561655340000,1.13666,1.136665,1.13661,1.136645,0],[1561655400000,1.13665,1.13665,1.136615,1.136635,0],[1561655460000,1.13663,1.13669,1.136615,1.13664,0],[1561655520000,1.136635,1.136645,1.13663,1.136635,0],[1561655580000,1.13664,1.136645,1.13663,1.13664,0],[1561655640000,1.136645,1.13674,1.13664,1.13669,0],[1561655700000,1.136695,1.136745,1.13665,1.13674,0],[1561655760000,1.136745,1.13675,1.136715,1.136715,0],[1561655820000,1.13672,1.13683,1.13671,1.13679,0],[1561655880000,1.136795,1.136845,1.13678,1.136835,0],[1561655940000,1.13683,1.136835,1.136735,1.136745,0],[1561656000000,1.13675,1.136855,1.13674,1.13685,0],[1561656060000,1.136855,1.136995,1.136845,1.13698,0],[1561656120000,1.136985,1.137,1.136895,1.13699,0],[1561656180000,1.136995,1.137075,1.136995,1.137035,0],[1561656240000,1.13704,1.13709,1.13703,1.13708,0],[1561656300000,1.137085,1.137085,1.13703,1.13704,0],[1561656360000,1.137035,1.13704,1.13699,1.136995,0],[1561656420000,1.13699,1.13699,1.136915,1.136935,0],[1561656480000,1.13694,1.136965,1.13693,1.136935,0],[1561656540000,1.13694,1.13699,1.136885,1.136885,0],[1561656600000,1.13689,1.13699,1.13688,1.13696,0],[1561656660000,1.136955,1.13699,1.136935,1.13699,0],[1561656720000,1.136995,1.136995,1.136875,1.13688,0],[1561656780000,1.136875,1.13692,1.13686,1.13687,0],[1561656840000,1.136875,1.13689,1.13684,1.136845,0],[1561656900000,1.13684,1.13704,1.13683,1.136955,0],[1561656960000,1.13695,1.13695,1.13678,1.136825,0],[1561657020000,1.13682,1.136835,1.136775,1.136785,0],[1561657080000,1.13678,1.136825,1.136685,1.136705,0],[1561657140000,1.1367,1.1367,1.13657,1.1366,0],[1561657200000,1.136605,1.136615,1.13646,1.136475,0],[1561657260000,1.13648,1.13656,1.136465,1.13651,0],[1561657320000,1.136515,1.136585,1.136505,1.136575,0],[1561657380000,1.13658,1.13658,1.13652,1.136525,0],[1561657440000,1.13653,1.13658,1.13652,1.136525,0],[1561657500000,1.13653,1.13662,1.136525,1.136605,0],[1561657560000,1.13661,1.13661,1.136555,1.13659,0],[1561657620000,1.136595,1.136605,1.136585,1.136605,0],[1561657680000,1.1366,1.136635,1.13658,1.136585,0],[1561657740000,1.13658,1.13669,1.13658,1.136655,0],[1561657800000,1.13665,1.13665,1.136515,1.136535,0],[1561657860000,1.13654,1.13659,1.13653,1.13653,0],[1561657920000,1.136525,1.13654,1.13649,1.136535,0],[1561657980000,1.13654,1.136635,1.13653,1.136635,0],[1561658040000,1.13664,1.136685,1.136585,1.136645,0],[1561658100000,1.13665,1.136705,1.13664,1.136655,0],[1561658160000,1.13665,1.136685,1.136625,1.136655,0],[1561658220000,1.13665,1.136785,1.136645,1.136765,0],[1561658280000,1.136755,1.136835,1.136675,1.136775,0],[1561658340000,1.13678,1.13684,1.136775,1.136815,0],[1561658400000,1.13682,1.13684,1.13673,1.13673,0],[1561658460000,1.136725,1.136775,1.13671,1.136775,0],[1561658520000,1.13678,1.136785,1.136675,1.136755,0],[1561658580000,1.13676,1.13677,1.136685,1.13674,0],[1561658640000,1.136735,1.136735,1.13663,1.13664,0],[1561658700000,1.136635,1.13672,1.13663,1.136665,0],[1561658760000,1.13666,1.136725,1.136655,1.1367,0],[1561658820000,1.136705,1.136725,1.136665,1.136685,0],[1561658880000,1.13668,1.136735,1.13663,1.136635,0],[1561658940000,1.13664,1.136655,1.136595,1.136655,0],[1561659000000,1.13666,1.1367,1.13662,1.136695,0],[1561659060000,1.1367,1.136705,1.136655,1.13668,0],[1561659120000,1.136685,1.13669,1.136605,1.136655,0],[1561659180000,1.13666,1.136685,1.136635,1.13664,0],[1561659240000,1.136645,1.136665,1.13659,1.13659,0],[1561659300000,1.136595,1.136605,1.13655,1.1366,0],[1561659360000,1.136595,1.136685,1.136595,1.136645,0],[1561659420000,1.13664,1.13675,1.13664,1.13673,0],[1561659480000,1.136735,1.13678,1.136735,1.136775,0],[1561659540000,1.13678,1.136805,1.136735,1.136755,0],[1561659600000,1.13675,1.136805,1.1367,1.13675,0],[1561659660000,1.136745,1.136755,1.136685,1.136695,0],[1561659720000,1.1367,1.136745,1.136665,1.136675,0],[1561659780000,1.13668,1.136715,1.136655,1.136715,0],[1561659840000,1.13672,1.136815,1.13672,1.136815,0],[1561659900000,1.13681,1.136855,1.13678,1.136815,0],[1561659960000,1.13682,1.136895,1.13682,1.136855,0],[1561660020000,1.13686,1.136895,1.136855,1.136885,0],[1561660080000,1.13688,1.136895,1.136855,1.13689,0],[1561660140000,1.136895,1.13694,1.136845,1.13687,0],[1561660200000,1.136865,1.136895,1.13686,1.136895,0],[1561660260000,1.1369,1.13693,1.136895,1.136905,0],[1561660320000,1.1369,1.136905,1.13686,1.136865,0],[1561660380000,1.13687,1.13695,1.13686,1.13691,0],[1561660440000,1.136915,1.13692,1.13684,1.136855,0],[1561660500000,1.136845,1.13686,1.13681,1.136815,0],[1561660560000,1.13682,1.13682,1.13676,1.13679,0],[1561660620000,1.136785,1.13679,1.136675,1.1367,0],[1561660680000,1.136695,1.1367,1.136665,1.13668,0],[1561660740000,1.136685,1.136735,1.13666,1.136735,0],[1561660800000,1.13674,1.136865,1.13673,1.13684,0],[1561660860000,1.136835,1.13684,1.136735,1.13678,0],[1561660920000,1.136785,1.136835,1.13678,1.136805,0],[1561660980000,1.1368,1.136895,1.1368,1.136855,0],[1561661040000,1.13685,1.13695,1.13685,1.136945,0],[1561661100000,1.13694,1.13695,1.136785,1.13685,0],[1561661160000,1.136855,1.1369,1.136845,1.136895,0],[1561661220000,1.1369,1.136945,1.13689,1.136895,0],[1561661280000,1.13689,1.136905,1.13686,1.136895,0],[1561661340000,1.1369,1.136905,1.136865,1.136875,0],[1561661400000,1.13687,1.13693,1.136845,1.13691,0],[1561661460000,1.136905,1.13691,1.13683,1.136845,0],[1561661520000,1.13685,1.13693,1.136845,1.136845,0],[1561661580000,1.13685,1.136855,1.136765,1.136775,0],[1561661640000,1.13678,1.136805,1.136755,1.136795,0],[1561661700000,1.13679,1.136835,1.13677,1.136835,0],[1561661760000,1.13684,1.136895,1.136805,1.136895,0],[1561661820000,1.13689,1.13695,1.13684,1.136945,0],[1561661880000,1.13694,1.136995,1.136935,1.136985,0],[1561661940000,1.13699,1.137055,1.136965,1.137045,0],[1561662000000,1.13705,1.13735,1.137045,1.13734,0],[1561662060000,1.137345,1.1374,1.137005,1.137115,0],[1561662120000,1.13711,1.137135,1.13708,1.137115,0],[1561662180000,1.13712,1.137125,1.137015,1.13702,0],[1561662240000,1.137025,1.137045,1.136935,1.136935,0],[1561662300000,1.13694,1.13698,1.13693,1.13697,0],[1561662360000,1.136975,1.137005,1.13697,1.13698,0],[1561662420000,1.136975,1.13701,1.136935,1.136945,0],[1561662480000,1.13694,1.13698,1.136935,1.136935,0],[1561662540000,1.13694,1.136945,1.1369,1.136915,0],[1561662600000,1.13692,1.136945,1.13688,1.136905,0],[1561662660000,1.13691,1.13694,1.136875,1.13692,0],[1561662720000,1.136915,1.136935,1.136885,1.136935,0],[1561662780000,1.13694,1.13694,1.136875,1.136895,0],[1561662840000,1.1369,1.136935,1.1368,1.1368,0],[1561662900000,1.136805,1.136835,1.13674,1.136765,0],[1561662960000,1.13677,1.136785,1.13674,1.13678,0],[1561663020000,1.136785,1.136845,1.13678,1.13679,0],[1561663080000,1.136795,1.136835,1.136755,1.136795,0],[1561663140000,1.1368,1.136805,1.13668,1.136795,0],[1561663200000,1.13679,1.136845,1.13677,1.136825,0],[1561663260000,1.13683,1.136895,1.1368,1.136895,0],[1561663320000,1.13689,1.136955,1.13689,1.136955,0],[1561663380000,1.13695,1.13699,1.13694,1.13695,0],[1561663440000,1.136945,1.136945,1.1369,1.13693,0],[1561663500000,1.136925,1.136995,1.136925,1.136945,0],[1561663560000,1.13695,1.137045,1.136925,1.137005,0],[1561663620000,1.13701,1.137095,1.137,1.137075,0],[1561663680000,1.13708,1.13709,1.13696,1.136985,0],[1561663740000,1.13698,1.13715,1.13697,1.13713,0],[1561663800000,1.13712,1.1372,1.137115,1.137145,0],[1561663860000,1.13714,1.13714,1.137005,1.13703,0],[1561663920000,1.137035,1.13705,1.13701,1.13705,0],[1561663980000,1.137055,1.137055,1.13703,1.13705,0],[1561664040000,1.137055,1.13709,1.137055,1.13708,0],[1561664100000,1.137085,1.13709,1.13706,1.13708,0],[1561664160000,1.137085,1.13709,1.13703,1.13705,0],[1561664220000,1.137045,1.137075,1.137035,1.137045,0],[1561664280000,1.13704,1.13705,1.136965,1.136965,0],[1561664340000,1.136975,1.137025,1.136975,1.137015,0],[1561664400000,1.13702,1.13711,1.13702,1.13711,0],[1561664460000,1.137105,1.13714,1.137075,1.13714,0],[1561664520000,1.137145,1.137175,1.137145,1.13716,0],[1561664580000,1.137155,1.137155,1.137065,1.137105,0],[1561664640000,1.1371,1.137105,1.13705,1.13708,0],[1561664700000,1.137085,1.137095,1.137005,1.13701,0],[1561664760000,1.137005,1.137005,1.136965,1.136975,0],[1561664820000,1.13697,1.13699,1.13694,1.13699,0],[1561664880000,1.136995,1.137045,1.136955,1.137045,0],[1561664940000,1.13704,1.137095,1.137005,1.137085,0],[1561665000000,1.13709,1.137095,1.137,1.137055,0],[1561665060000,1.13705,1.137075,1.137005,1.13705,0],[1561665120000,1.137055,1.13707,1.137045,1.137055,0],[1561665180000,1.13705,1.137075,1.137045,1.137055,0],[1561665240000,1.13705,1.13705,1.136985,1.13699,0],[1561665300000,1.136995,1.136995,1.136965,1.136965,0],[1561665360000,1.13696,1.13702,1.13693,1.13693,0],[1561665420000,1.136935,1.137015,1.13693,1.136995,0],[1561665480000,1.13699,1.136995,1.136905,1.136915,0],[1561665540000,1.136905,1.136935,1.136885,1.136895,0],[1561665600000,1.13689,1.13689,1.13682,1.13685,0],[1561665660000,1.136845,1.13692,1.13684,1.13688,0],[1561665720000,1.136875,1.136895,1.136855,1.13688,0],[1561665780000,1.136885,1.136885,1.136845,1.13688,0],[1561665840000,1.136875,1.13688,1.136845,1.136855,0],[1561665900000,1.13686,1.136895,1.136845,1.13685,0],[1561665960000,1.136855,1.137065,1.136855,1.137065,0],[1561666020000,1.13706,1.137105,1.13702,1.1371,0],[1561666080000,1.137105,1.13711,1.13705,1.137075,0],[1561666140000,1.13707,1.137095,1.137065,1.137085,0],[1561666200000,1.13709,1.13718,1.137065,1.13711,0],[1561666260000,1.137105,1.13713,1.13708,1.13708,0],[1561666320000,1.137075,1.137075,1.13704,1.13704,0],[1561666380000,1.137045,1.137045,1.13698,1.13698,0],[1561666440000,1.136985,1.137005,1.136985,1.137005,0],[1561666500000,1.137,1.137005,1.13696,1.136965,0],[1561666560000,1.13696,1.13697,1.13689,1.136895,0],[1561666620000,1.13689,1.1369,1.136885,1.136885,0],[1561666680000,1.13689,1.136895,1.136885,1.136895,0],[1561666740000,1.13689,1.1369,1.13686,1.136885,0],[1561666800000,1.13689,1.136905,1.136865,1.136885,0],[1561666860000,1.13688,1.136895,1.13688,1.136895,0],[1561666920000,1.1369,1.136905,1.136895,1.1369,0],[1561666980000,1.136895,1.13691,1.13689,1.136905,0],[1561667040000,1.136915,1.13695,1.13691,1.136925,0],[1561667100000,1.13692,1.13692,1.13687,1.13687,0],[1561667160000,1.136865,1.13687,1.136855,1.136865,0],[1561667220000,1.13686,1.136865,1.136825,1.136835,0],[1561667280000,1.13683,1.1369,1.136825,1.13689,0],[1561667340000,1.136885,1.136905,1.13686,1.136895,0],[1561667400000,1.13689,1.13694,1.136865,1.136925,0],[1561667460000,1.13692,1.136965,1.1369,1.136965,0],[1561667520000,1.13697,1.137095,1.13697,1.13704,0],[1561667580000,1.137045,1.137055,1.137025,1.137025,0],[1561667640000,1.13702,1.137025,1.136965,1.136965,0],[1561667700000,1.13697,1.136975,1.136895,1.13693,0],[1561667760000,1.136925,1.136975,1.136865,1.136865,0],[1561667820000,1.13687,1.136975,1.13687,1.136895,0],[1561667880000,1.1369,1.136955,1.136895,1.1369,0],[1561667940000,1.136895,1.13692,1.13686,1.1369,0],[1561668000000,1.136895,1.13692,1.136895,1.136915,0],[1561668060000,1.13692,1.13697,1.13685,1.136865,0],[1561668120000,1.13686,1.136975,1.13685,1.13695,0],[1561668180000,1.136945,1.13695,1.136945,1.13695,0],[1561668240000,1.136945,1.13697,1.136935,1.13697,0],[1561668300000,1.136965,1.13697,1.13696,1.13696,0],[1561668360000,1.136965,1.13703,1.136945,1.136945,0],[1561668420000,1.13695,1.136965,1.13695,1.13696,0],[1561668480000,1.136965,1.13697,1.13693,1.136945,0],[1561668540000,1.13695,1.13696,1.136895,1.136895,0],[1561668600000,1.1369,1.13696,1.1369,1.13691,0],[1561668660000,1.1369,1.1369,1.136855,1.13686,0],[1561668720000,1.136865,1.13687,1.13685,1.13686,0],[1561668780000,1.13685,1.13691,1.136845,1.136855,0],[1561668840000,1.13686,1.136945,1.13686,1.136905,0],[1561668900000,1.1369,1.13694,1.13689,1.13691,0],[1561668960000,1.136915,1.13696,1.1369,1.136925,0],[1561669020000,1.13693,1.136995,1.136925,1.136965,0],[1561669080000,1.13697,1.137,1.136955,1.137,0],[1561669140000,1.136995,1.137,1.136955,1.136955,0],[1561669200000,1.13696,1.13698,1.136915,1.13692,0],[1561669260000,1.136935,1.136935,1.136905,1.13691,0],[1561669320000,1.1369,1.13691,1.1369,1.13691,0],[1561669380000,1.136935,1.13694,1.136925,1.13693,0],[1561669440000,1.13692,1.136925,1.13692,1.13692,0],[1561669500000,1.13692,1.136925,1.13692,1.13692,0],[1561669560000,1.136925,1.136925,1.13692,1.136925,0],[1561669620000,1.13692,1.136925,1.13692,1.136925,0],[1561669680000,1.13693,1.13693,1.136925,1.136925,0],[1561669740000,1.13692,1.136955,1.13692,1.136945,0],[1561669800000,1.13695,1.136965,1.13685,1.13687,0],[1561669860000,1.136865,1.136915,1.136685,1.13687,0],[1561669920000,1.136855,1.13689,1.13684,1.13688,0],[1561669980000,1.136885,1.136885,1.136865,1.13687,0],[1561670040000,1.13686,1.13688,1.136855,1.136865,0],[1561670100000,1.136875,1.13692,1.13685,1.136885,0],[1561670160000,1.136865,1.136955,1.13685,1.13694,0],[1561670220000,1.13689,1.13696,1.136865,1.136885,0],[1561670280000,1.1369,1.13696,1.136785,1.13689,0],[1561670340000,1.13687,1.136925,1.136845,1.136915,0],[1561670400000,1.1369,1.13692,1.13686,1.136895,0],[1561670460000,1.136905,1.136935,1.1369,1.136925,0],[1561670520000,1.13692,1.136935,1.13686,1.136915,0],[1561670580000,1.13691,1.13691,1.136845,1.136875,0],[1561670640000,1.136865,1.136865,1.136815,1.13683,0],[1561670700000,1.136825,1.136845,1.136825,1.136845,0],[1561670760000,1.13684,1.13684,1.13684,1.13684,0],[1561670820000,1.13683,1.13685,1.136815,1.136825,0],[1561670880000,1.13683,1.13683,1.13683,1.13683,0],[1561670940000,1.136825,1.136825,1.136815,1.136815,0],[1561671000000,1.13682,1.13682,1.13679,1.136805,0],[1561671060000,1.13681,1.13685,1.13674,1.136745,0],[1561671120000,1.13675,1.13676,1.136735,1.13675,0],[1561671180000,1.136755,1.136765,1.136745,1.13675,0],[1561671240000,1.136755,1.1368,1.136755,1.1368,0],[1561671300000,1.136805,1.13683,1.13679,1.13683,0],[1561671360000,1.136835,1.136865,1.13683,1.136865,0],[1561671420000,1.136835,1.136845,1.136815,1.136825,0],[1561671480000,1.13682,1.136835,1.13679,1.13679,0],[1561671540000,1.136795,1.136795,1.136785,1.136785,0],[1561671600000,1.13678,1.136785,1.136775,1.13678,0],[1561671660000,1.136775,1.13678,1.13677,1.13678,0],[1561671720000,1.136775,1.136785,1.13677,1.136775,0],[1561671780000,1.13678,1.13678,1.13675,1.136755,0],[1561671840000,1.13675,1.13676,1.13675,1.136755,0],[1561671900000,1.13676,1.136765,1.13675,1.136755,0],[1561671960000,1.13676,1.136765,1.13675,1.136755,0],[1561672020000,1.13676,1.136765,1.13675,1.136755,0],[1561672080000,1.13675,1.13676,1.136735,1.13674,0],[1561672140000,1.136745,1.13675,1.136735,1.136735,0],[1561672200000,1.13674,1.136745,1.136735,1.136745,0],[1561672260000,1.136735,1.136755,1.136735,1.136745,0],[1561672320000,1.13674,1.13675,1.13673,1.136745,0],[1561672380000,1.136735,1.136735,1.13672,1.136735,0],[1561672440000,1.136725,1.13674,1.13672,1.136735,0],[1561672500000,1.13673,1.13675,1.136725,1.136735,0],[1561672560000,1.13673,1.13676,1.136725,1.13675,0],[1561672620000,1.136755,1.13677,1.136755,1.13677,0],[1561672680000,1.13676,1.13677,1.13675,1.13677,0],[1561672740000,1.136765,1.13679,1.13676,1.13679,0],[1561672800000,1.136795,1.136875,1.13679,1.136835,0],[1561672860000,1.13684,1.13691,1.136795,1.136865,0],[1561672920000,1.13686,1.136865,1.136835,1.13686,0],[1561672980000,1.136865,1.136915,1.13686,1.136875,0],[1561673040000,1.13687,1.1369,1.136855,1.13686,0],[1561673100000,1.136855,1.136915,1.13685,1.136915,0],[1561673160000,1.13691,1.136915,1.13688,1.1369,0],[1561673220000,1.136895,1.136895,1.136875,1.13688,0],[1561673280000,1.136875,1.13688,1.13687,1.136875,0],[1561673340000,1.13687,1.136885,1.13686,1.136865,0],[1561673400000,1.13687,1.136875,1.136865,1.136875,0],[1561673460000,1.13687,1.136875,1.136865,1.136875,0],[1561673520000,1.13687,1.13687,1.13687,1.13687,0],[1561673580000,1.136875,1.136885,1.136875,1.13688,0],[1561673640000,1.136875,1.136875,1.136875,1.136875,0],[1561673700000,1.13688,1.136925,1.13688,1.136925,0],[1561673760000,1.13692,1.136925,1.136885,1.136925,0],[1561673820000,1.13692,1.13693,1.13692,1.13693,0],[1561673880000,1.136935,1.136935,1.13693,1.136935,0],[1561673940000,1.13693,1.13693,1.13687,1.136875,0],[1561674000000,1.13693,1.13693,1.13687,1.136875,0],[1561674060000,1.13688,1.13689,1.136835,1.136835,0],[1561674120000,1.13684,1.13688,1.13684,1.13688,0],[1561674180000,1.13684,1.13688,1.13684,1.13688,0],[1561674240000,1.13684,1.13688,1.13684,1.13688,0],[1561674300000,1.136885,1.136885,1.13688,1.136885,0],[1561674360000,1.13689,1.1369,1.13688,1.13689,0],[1561674420000,1.13689,1.1369,1.13688,1.13689,0],[1561674480000,1.136885,1.13689,1.136885,1.136885,0],[1561674540000,1.13689,1.13689,1.13689,1.13689,0],[1561674600000,1.136885,1.13689,1.13688,1.13689,0],[1561674660000,1.136885,1.136885,1.136875,1.136875,0],[1561674720000,1.13688,1.13688,1.136825,1.136825,0],[1561674780000,1.13688,1.13688,1.136825,1.136825,0],[1561674840000,1.13688,1.13688,1.136825,1.136825,0],[1561674900000,1.13683,1.136835,1.136825,1.136825,0],[1561674960000,1.13683,1.136835,1.136825,1.136825,0],[1561675020000,1.13683,1.13683,1.136825,1.136825,0],[1561675080000,1.13683,1.13683,1.136775,1.136775,0],[1561675140000,1.13683,1.13683,1.136775,1.136775,0],[1561675200000,1.13677,1.13678,1.13677,1.13678,0],[1561675260000,1.136785,1.13679,1.13678,1.13679,0],[1561675320000,1.13678,1.1368,1.13678,1.13678,0],[1561675380000,1.13678,1.1368,1.13678,1.13678,0],[1561675440000,1.13678,1.1368,1.13678,1.13678,0],[1561675500000,1.136785,1.13679,1.136785,1.13679,0],[1561675560000,1.136785,1.13679,1.136785,1.13679,0],[1561675620000,1.136785,1.13679,1.13678,1.13678,0],[1561675680000,1.136785,1.13684,1.13678,1.136835,0],[1561675740000,1.136785,1.13684,1.13678,1.136835,0],[1561675800000,1.136785,1.13684,1.13678,1.136835,0],[1561675860000,1.13683,1.136845,1.136825,1.136835,0],[1561675920000,1.13684,1.136885,1.13684,1.13688,0],[1561675980000,1.136885,1.136885,1.136875,1.13688,0],[1561676040000,1.136875,1.13693,1.136875,1.13692,0],[1561676100000,1.136915,1.136915,1.13683,1.13683,0],[1561676160000,1.136825,1.13683,1.136825,1.136825,0],[1561676220000,1.13683,1.13683,1.13683,1.13683,0],[1561676280000,1.136825,1.13683,1.136825,1.136825,0],[1561676340000,1.13683,1.136835,1.136815,1.136835,0],[1561676400000,1.136845,1.13685,1.136835,1.13684,0],[1561676460000,1.13683,1.13683,1.136775,1.136775,0],[1561676520000,1.13678,1.13678,1.136775,1.136775,0],[1561676580000,1.13678,1.13679,1.13678,1.13679,0],[1561676640000,1.136785,1.136825,1.136785,1.136825,0],[1561676700000,1.13682,1.13683,1.13681,1.13682,0],[1561676760000,1.136815,1.13682,1.136795,1.13682,0],[1561676820000,1.136825,1.136825,1.13682,1.136825,0],[1561676880000,1.13683,1.13683,1.136825,1.136825,0],[1561676940000,1.13682,1.13683,1.136795,1.13683,0],[1561677000000,1.136825,1.13683,1.136825,1.136825,0],[1561677060000,1.13683,1.13684,1.13682,1.136825,0],[1561677120000,1.13683,1.136835,1.13682,1.136835,0],[1561677180000,1.13683,1.13687,1.136825,1.13687,0],[1561677240000,1.136865,1.13687,1.13684,1.136845,0],[1561677300000,1.13685,1.13687,1.136845,1.13686,0],[1561677360000,1.136865,1.136865,1.136815,1.136825,0],[1561677420000,1.13682,1.13683,1.136815,1.136825,0],[1561677480000,1.13683,1.13683,1.13682,1.136825,0],[1561677540000,1.13683,1.136835,1.136825,1.136825,0],[1561677600000,1.136835,1.136875,1.136835,1.136875,0],[1561677660000,1.13687,1.136875,1.13685,1.136875,0],[1561677720000,1.13687,1.136875,1.136845,1.136865,0],[1561677780000,1.13686,1.13687,1.136845,1.136865,0],[1561677840000,1.13686,1.13687,1.13682,1.13686,0],[1561677900000,1.136865,1.13687,1.13685,1.13687,0],[1561677960000,1.136865,1.13687,1.136865,1.136865,0],[1561678020000,1.13686,1.13687,1.13686,1.136865,0],[1561678080000,1.13687,1.136875,1.136865,1.136865,0],[1561678140000,1.13687,1.136875,1.136865,1.136865,0],[1561678200000,1.13687,1.136875,1.136865,1.136865,0],[1561678260000,1.13687,1.13687,1.13687,1.13687,0],[1561678320000,1.136865,1.13687,1.136865,1.136865,0],[1561678380000,1.13687,1.13687,1.136835,1.13687,0],[1561678440000,1.136865,1.13687,1.136855,1.13687,0],[1561678500000,1.136865,1.13687,1.13682,1.13682,0],[1561678560000,1.136825,1.136945,1.136825,1.136935,0],[1561678620000,1.13694,1.137015,1.13694,1.13699,0],[1561678680000,1.136985,1.13703,1.13698,1.137025,0],[1561678740000,1.13703,1.13703,1.13699,1.13702,0],[1561678800000,1.137025,1.137025,1.13702,1.13702,0],[1561678860000,1.137025,1.137025,1.13701,1.13702,0],[1561678920000,1.137025,1.13703,1.13702,1.137025,0],[1561678980000,1.13702,1.137135,1.13702,1.13713,0],[1561679040000,1.137125,1.13714,1.13712,1.13714,0],[1561679100000,1.137145,1.137155,1.13713,1.13714,0],[1561679160000,1.137135,1.137145,1.137105,1.137125,0],[1561679220000,1.137135,1.13716,1.137135,1.13714,0],[1561679280000,1.137145,1.13716,1.13714,1.13714,0],[1561679340000,1.137145,1.137165,1.13714,1.13716,0],[1561679400000,1.137155,1.13723,1.137125,1.137175,0],[1561679460000,1.13719,1.13727,1.13718,1.13723,0],[1561679520000,1.137225,1.13733,1.137215,1.137325,0],[1561679580000,1.13732,1.137325,1.13723,1.137295,0],[1561679640000,1.1373,1.137345,1.13729,1.13731,0],[1561679700000,1.1373,1.1373,1.13719,1.13723,0],[1561679760000,1.137225,1.137225,1.13713,1.13713,0],[1561679820000,1.137125,1.137155,1.1371,1.13712,0],[1561679880000,1.137125,1.137185,1.13712,1.137185,0],[1561679940000,1.13719,1.137195,1.13712,1.137125,0],[1561680000000,1.13713,1.137165,1.137075,1.13713,0],[1561680060000,1.137135,1.137205,1.13707,1.137145,0],[1561680120000,1.13714,1.13719,1.137095,1.13713,0],[1561680180000,1.137125,1.13727,1.137085,1.137245,0],[1561680240000,1.13725,1.13735,1.13719,1.137325,0],[1561680300000,1.13733,1.137345,1.137245,1.137335,0],[1561680360000,1.13733,1.137335,1.137185,1.137185,0],[1561680420000,1.13718,1.13727,1.13717,1.13727,0],[1561680480000,1.137265,1.13742,1.137265,1.137375,0],[1561680540000,1.13737,1.137495,1.1373,1.137485,0],[1561680600000,1.13748,1.13748,1.13739,1.1374,0],[1561680660000,1.137405,1.137495,1.13738,1.137495,0],[1561680720000,1.13749,1.13749,1.13737,1.137375,0],[1561680780000,1.13738,1.13739,1.13731,1.137325,0],[1561680840000,1.13732,1.13736,1.13732,1.13736,0],[1561680900000,1.137355,1.13742,1.137295,1.1374,0],[1561680960000,1.137395,1.13741,1.137355,1.13738,0],[1561681020000,1.137385,1.137445,1.137385,1.137395,0],[1561681080000,1.1374,1.137455,1.1374,1.13745,0],[1561681140000,1.137445,1.137545,1.13744,1.13753,0],[1561681200000,1.137525,1.137525,1.13746,1.13746,0],[1561681260000,1.137455,1.13751,1.13744,1.137455,0],[1561681320000,1.13746,1.137475,1.13745,1.13747,0],[1561681380000,1.137465,1.13763,1.137465,1.13763,0],[1561681440000,1.137635,1.137645,1.137525,1.137525,0],[1561681500000,1.13752,1.13752,1.1374,1.13743,0],[1561681560000,1.137435,1.137495,1.13743,1.13745,0],[1561681620000,1.137445,1.137445,1.137375,1.13738,0],[1561681680000,1.137375,1.137375,1.13726,1.137315,0],[1561681740000,1.13731,1.137415,1.13731,1.137415,0],[1561681800000,1.13742,1.137425,1.137365,1.1374,0],[1561681860000,1.137405,1.1375,1.137405,1.13747,0],[1561681920000,1.137465,1.137465,1.13727,1.137325,0],[1561681980000,1.13733,1.137415,1.13731,1.137365,0],[1561682040000,1.13737,1.13737,1.137225,1.137275,0],[1561682100000,1.13728,1.13736,1.13728,1.13733,0],[1561682160000,1.137325,1.13733,1.13727,1.13727,0],[1561682220000,1.137275,1.137315,1.137215,1.137215,0],[1561682280000,1.13721,1.13727,1.137165,1.137235,0],[1561682340000,1.13723,1.13731,1.13722,1.1373,0],[1561682400000,1.137305,1.137315,1.13727,1.137315,0],[1561682460000,1.13731,1.13731,1.1372,1.137225,0],[1561682520000,1.13723,1.137235,1.137195,1.137205,0],[1561682580000,1.13721,1.13727,1.13721,1.137235,0],[1561682640000,1.13723,1.13723,1.13717,1.137175,0],[1561682700000,1.13718,1.13718,1.137145,1.13716,0],[1561682760000,1.137155,1.13726,1.137155,1.137255,0],[1561682820000,1.13726,1.137265,1.13723,1.13725,0],[1561682880000,1.137255,1.13726,1.13711,1.13711,0],[1561682940000,1.137105,1.13712,1.137085,1.137095,0],[1561683000000,1.1371,1.137165,1.13709,1.13715,0],[1561683060000,1.137145,1.13716,1.137105,1.13714,0],[1561683120000,1.137145,1.13716,1.13713,1.137135,0],[1561683180000,1.13713,1.137155,1.137065,1.13715,0],[1561683240000,1.137155,1.13717,1.137155,1.13716,0],[1561683300000,1.137155,1.1372,1.13696,1.137,0],[1561683360000,1.13699,1.13708,1.13691,1.137065,0],[1561683420000,1.13706,1.13706,1.137,1.137015,0],[1561683480000,1.13702,1.13707,1.137005,1.137065,0],[1561683540000,1.13707,1.13707,1.137005,1.137055,0],[1561683600000,1.13705,1.137055,1.137005,1.13701,0],[1561683660000,1.137015,1.13716,1.137015,1.137115,0],[1561683720000,1.13712,1.137155,1.13703,1.137065,0],[1561683780000,1.13706,1.137165,1.13703,1.137065,0],[1561683840000,1.13706,1.13714,1.137005,1.137115,0],[1561683900000,1.13711,1.137155,1.137085,1.13715,0],[1561683960000,1.137145,1.137215,1.13714,1.13716,0],[1561684020000,1.137155,1.137255,1.137155,1.137215,0],[1561684080000,1.13721,1.137215,1.137185,1.13719,0],[1561684140000,1.137185,1.13721,1.13717,1.137185,0],[1561684200000,1.13719,1.137215,1.137185,1.13721,0],[1561684260000,1.137205,1.13721,1.13716,1.13721,0],[1561684320000,1.137205,1.13721,1.137055,1.137055,0],[1561684380000,1.13706,1.137065,1.137005,1.13701,0],[1561684440000,1.137005,1.13701,1.13687,1.136905,0],[1561684500000,1.1369,1.136935,1.136875,1.136915,0],[1561684560000,1.136925,1.13693,1.136805,1.136855,0],[1561684620000,1.13685,1.13688,1.136825,1.136875,0],[1561684680000,1.13687,1.13692,1.13686,1.136865,0],[1561684740000,1.13686,1.136895,1.136855,1.13686,0],[1561684800000,1.136855,1.13686,1.136735,1.13676,0],[1561684860000,1.136765,1.136785,1.136755,1.13676,0],[1561684920000,1.136765,1.13678,1.13674,1.136775,0],[1561684980000,1.13678,1.13679,1.136745,1.136765,0],[1561685040000,1.13676,1.13676,1.136735,1.136745,0],[1561685100000,1.136755,1.136755,1.136645,1.136645,0],[1561685160000,1.13664,1.136675,1.136615,1.136655,0],[1561685220000,1.13665,1.136775,1.13665,1.136775,0],[1561685280000,1.13678,1.136815,1.136675,1.136675,0],[1561685340000,1.13667,1.136715,1.13665,1.13668,0],[1561685400000,1.136675,1.136715,1.136645,1.136705,0],[1561685460000,1.1367,1.136865,1.136685,1.136825,0],[1561685520000,1.13682,1.13682,1.136755,1.136765,0],[1561685580000,1.13676,1.136825,1.136735,1.13682,0],[1561685640000,1.136815,1.13682,1.13674,1.13681,0],[1561685700000,1.136805,1.136835,1.136765,1.136765,0],[1561685760000,1.13676,1.13676,1.136675,1.136675,0],[1561685820000,1.13668,1.136725,1.13667,1.136715,0],[1561685880000,1.13672,1.136775,1.136715,1.136775,0],[1561685940000,1.13677,1.136835,1.13676,1.136815,0],[1561686000000,1.13682,1.13683,1.13674,1.136825,0],[1561686060000,1.13682,1.136875,1.136815,1.136815,0],[1561686120000,1.13682,1.136825,1.13662,1.136675,0],[1561686180000,1.13668,1.136765,1.13662,1.13664,0],[1561686240000,1.136645,1.13675,1.13663,1.136665,0],[1561686300000,1.13667,1.136675,1.136605,1.136625,0],[1561686360000,1.13662,1.136755,1.136595,1.13668,0],[1561686420000,1.136675,1.1367,1.13664,1.136665,0],[1561686480000,1.13666,1.13669,1.13657,1.136685,0],[1561686540000,1.13669,1.1367,1.136585,1.136585,0],[1561686600000,1.13659,1.13668,1.13659,1.13668,0],[1561686660000,1.136685,1.13682,1.13668,1.136815,0],[1561686720000,1.13681,1.13681,1.136645,1.136685,0],[1561686780000,1.13668,1.136735,1.136665,1.136735,0],[1561686840000,1.13674,1.13685,1.136725,1.136805,0],[1561686900000,1.1368,1.136805,1.136775,1.136785,0],[1561686960000,1.13679,1.13683,1.13678,1.13679,0],[1561687020000,1.136785,1.136815,1.13678,1.13679,0],[1561687080000,1.136785,1.13679,1.13668,1.136715,0],[1561687140000,1.13671,1.136735,1.136675,1.136695,0],[1561687200000,1.1367,1.136725,1.136675,1.136695,0],[1561687260000,1.13669,1.13669,1.136665,1.13667,0],[1561687320000,1.136675,1.136745,1.136675,1.136735,0],[1561687380000,1.13673,1.13677,1.136675,1.136725,0],[1561687440000,1.136735,1.136735,1.13668,1.13668,0],[1561687500000,1.136685,1.13669,1.136675,1.13668,0],[1561687560000,1.136685,1.13674,1.136685,1.13674,0],[1561687620000,1.136735,1.13678,1.13673,1.136745,0],[1561687680000,1.13675,1.136785,1.136745,1.136785,0],[1561687740000,1.13678,1.13678,1.13662,1.136665,0],[1561687800000,1.13666,1.136665,1.13659,1.136605,0],[1561687860000,1.1366,1.13668,1.1366,1.136645,0],[1561687920000,1.13665,1.136685,1.13665,1.136675,0],[1561687980000,1.13667,1.13673,1.13657,1.13668,0],[1561688040000,1.136685,1.13672,1.136665,1.136665,0],[1561688100000,1.13666,1.13674,1.136655,1.13673,0],[1561688160000,1.136725,1.136735,1.13671,1.136725,0],[1561688220000,1.13673,1.136735,1.136725,1.13673,0],[1561688280000,1.136725,1.136785,1.1367,1.13678,0],[1561688340000,1.136775,1.136815,1.136775,1.136815,0],[1561688400000,1.13682,1.13685,1.136795,1.136835,0],[1561688460000,1.13683,1.136845,1.136825,1.13684,0],[1561688520000,1.136835,1.13688,1.136835,1.13687,0],[1561688580000,1.136875,1.136885,1.13682,1.13683,0],[1561688640000,1.136825,1.136835,1.13677,1.136835,0],[1561688700000,1.13683,1.13684,1.136785,1.13679,0],[1561688760000,1.136795,1.13684,1.136765,1.136775,0],[1561688820000,1.13677,1.13678,1.13667,1.13677,0],[1561688880000,1.136775,1.136785,1.1367,1.136725,0],[1561688940000,1.13673,1.13682,1.1367,1.136795,0],[1561689000000,1.1368,1.13683,1.136795,1.13682,0],[1561689060000,1.136815,1.136815,1.13675,1.13678,0],[1561689120000,1.136785,1.13683,1.136775,1.13678,0],[1561689180000,1.136785,1.136855,1.13678,1.136845,0],[1561689240000,1.13684,1.136885,1.1368,1.13688,0],[1561689300000,1.136875,1.136905,1.136875,1.136875,0],[1561689360000,1.13688,1.136895,1.13688,1.136885,0],[1561689420000,1.13689,1.13692,1.136885,1.13689,0],[1561689480000,1.136895,1.13693,1.136895,1.13693,0],[1561689540000,1.136925,1.136995,1.136915,1.136985,0],[1561689600000,1.13699,1.136995,1.13694,1.136985,0],[1561689660000,1.13699,1.13699,1.136975,1.13698,0],[1561689720000,1.13697,1.13699,1.136965,1.136985,0],[1561689780000,1.13698,1.136985,1.136935,1.136985,0],[1561689840000,1.13698,1.13703,1.136955,1.137015,0],[1561689900000,1.13701,1.137025,1.136985,1.136985,0],[1561689960000,1.13699,1.137,1.13696,1.136995,0],[1561690020000,1.137,1.137025,1.136995,1.13701,0],[1561690080000,1.137015,1.137015,1.13699,1.13699,0],[1561690140000,1.136995,1.136995,1.136985,1.136995,0],[1561690200000,1.13699,1.13702,1.136945,1.136985,0],[1561690260000,1.13698,1.13698,1.136925,1.136945,0],[1561690320000,1.13694,1.136945,1.136915,1.136945,0],[1561690380000,1.13694,1.136995,1.136935,1.13699,0],[1561690440000,1.136985,1.136985,1.136985,1.136985,0],[1561690500000,1.136985,1.136985,1.136985,1.136985,0],[1561690560000,1.13699,1.13701,1.136985,1.13699,0],[1561690620000,1.136985,1.136995,1.13694,1.13694,0],[1561690680000,1.136945,1.136945,1.13693,1.13693,0],[1561690740000,1.136925,1.136935,1.136925,1.136935,0],[1561690800000,1.13693,1.136965,1.136865,1.136875,0],[1561690860000,1.13687,1.136885,1.136865,1.13688,0],[1561690920000,1.136875,1.136885,1.136875,1.13688,0],[1561690980000,1.136875,1.136875,1.136875,1.136875,0],[1561691040000,1.13687,1.13687,1.136835,1.136835,0],[1561691100000,1.13683,1.13688,1.13683,1.13688,0],[1561691160000,1.13687,1.13688,1.13687,1.13688,0],[1561691220000,1.136875,1.13688,1.13687,1.136875,0],[1561691280000,1.13687,1.13687,1.13683,1.136835,0],[1561691340000,1.13683,1.136885,1.136825,1.136885,0],[1561691400000,1.13688,1.13689,1.13686,1.136865,0],[1561691460000,1.13686,1.13687,1.136795,1.1368,0],[1561691520000,1.136805,1.136835,1.1368,1.136835,0],[1561691580000,1.13684,1.13684,1.13682,1.136825,0],[1561691640000,1.13683,1.136835,1.13682,1.136835,0],[1561691700000,1.13683,1.136835,1.13681,1.13682,0],[1561691760000,1.136815,1.13683,1.136785,1.136785,0],[1561691820000,1.13679,1.13682,1.136785,1.136785,0],[1561691880000,1.13679,1.13681,1.13679,1.136805,0],[1561691940000,1.1368,1.136805,1.136785,1.13679,0],[1561692000000,1.136795,1.136825,1.13678,1.13678,0],[1561692060000,1.136775,1.136785,1.136775,1.13678,0],[1561692120000,1.136785,1.136805,1.13678,1.136785,0],[1561692180000,1.13678,1.136785,1.13677,1.13677,0],[1561692240000,1.13676,1.13677,1.136755,1.136765,0],[1561692300000,1.13677,1.136775,1.136715,1.136725,0],[1561692360000,1.13672,1.136735,1.13672,1.13672,0],[1561692420000,1.136715,1.136715,1.136565,1.136615,0],[1561692480000,1.136625,1.136645,1.13661,1.13662,0],[1561692540000,1.136625,1.136625,1.13657,1.1366,0],[1561692600000,1.136605,1.13664,1.136575,1.13663,0],[1561692660000,1.136635,1.136675,1.136585,1.13663,0],[1561692720000,1.136635,1.136635,1.136575,1.136585,0],[1561692780000,1.136575,1.1366,1.136555,1.136585,0],[1561692840000,1.136575,1.13663,1.136545,1.136565,0],[1561692900000,1.13657,1.136595,1.13657,1.136595,0],[1561692960000,1.1366,1.136635,1.136585,1.136635,0],[1561693020000,1.13664,1.13665,1.13661,1.13664,0],[1561693080000,1.136635,1.136635,1.13653,1.13653,0],[1561693140000,1.136535,1.13659,1.136535,1.136575,0],[1561693200000,1.13658,1.13664,1.136575,1.136625,0],[1561693260000,1.13662,1.13663,1.13657,1.136575,0],[1561693320000,1.13657,1.13663,1.13657,1.136625,0],[1561693380000,1.13662,1.13663,1.13659,1.13661,0],[1561693440000,1.136605,1.136625,1.13655,1.13657,0],[1561693500000,1.136575,1.13658,1.13654,1.13658,0],[1561693560000,1.136575,1.13658,1.13652,1.136525,0],[1561693620000,1.13653,1.136535,1.13652,1.136525,0],[1561693680000,1.13653,1.136565,1.13653,1.13653,0],[1561693740000,1.136535,1.13658,1.136535,1.136575,0],[1561693800000,1.13657,1.136575,1.136565,1.136575,0],[1561693860000,1.13657,1.13657,1.136515,1.13652,0],[1561693920000,1.136525,1.136525,1.13648,1.13652,0],[1561693980000,1.136525,1.136575,1.136525,1.136575,0],[1561694040000,1.13658,1.136625,1.13658,1.136595,0],[1561694100000,1.136585,1.13662,1.13655,1.13657,0],[1561694160000,1.136575,1.136615,1.136525,1.136525,0],[1561694220000,1.13653,1.136545,1.136515,1.13652,0],[1561694280000,1.136515,1.13653,1.136515,1.136525,0],[1561694340000,1.13653,1.13655,1.136515,1.136545,0],[1561694400000,1.13654,1.13657,1.136525,1.136545,0],[1561694460000,1.13655,1.136575,1.136505,1.136515,0],[1561694520000,1.13652,1.136525,1.136515,1.136525,0],[1561694580000,1.13653,1.13653,1.13651,1.136525,0],[1561694640000,1.13653,1.13657,1.136515,1.136515,0],[1561694700000,1.13652,1.136525,1.136505,1.136515,0],[1561694760000,1.13651,1.136525,1.136495,1.13652,0],[1561694820000,1.136525,1.136535,1.13642,1.136475,0],[1561694880000,1.13648,1.136535,1.136465,1.13649,0],[1561694940000,1.136485,1.13658,1.13648,1.1365,0],[1561695000000,1.136495,1.13656,1.136495,1.136505,0],[1561695060000,1.13651,1.136565,1.136505,1.13654,0],[1561695120000,1.136535,1.13658,1.136535,1.136575,0],[1561695180000,1.13658,1.13658,1.136505,1.13652,0],[1561695240000,1.136525,1.136545,1.136505,1.136545,0],[1561695300000,1.13655,1.13656,1.136525,1.136535,0],[1561695360000,1.13654,1.136555,1.136505,1.13653,0],[1561695420000,1.136525,1.13658,1.136525,1.13658,0],[1561695480000,1.136585,1.136635,1.136585,1.136635,0],[1561695540000,1.13663,1.136665,1.13663,1.136665,0],[1561695600000,1.13666,1.136665,1.136545,1.13658,0],[1561695660000,1.136575,1.136585,1.136565,1.136575,0],[1561695720000,1.13658,1.13658,1.136545,1.136575,0],[1561695780000,1.13658,1.13661,1.136525,1.13653,0],[1561695840000,1.136525,1.136565,1.13652,1.13653,0],[1561695900000,1.136535,1.136535,1.136495,1.136505,0],[1561695960000,1.13651,1.136535,1.136495,1.136525,0],[1561696020000,1.13653,1.136705,1.136505,1.13669,0],[1561696080000,1.136685,1.1367,1.13651,1.136515,0],[1561696140000,1.13652,1.136525,1.136475,1.13651,0],[1561696200000,1.136505,1.13651,1.136475,1.13651,0],[1561696260000,1.136515,1.136525,1.136465,1.13647,0],[1561696320000,1.136475,1.136475,1.136375,1.13638,0],[1561696380000,1.136385,1.13642,1.136385,1.13642,0],[1561696440000,1.136425,1.136445,1.136425,1.13643,0],[1561696500000,1.136435,1.136535,1.136435,1.136505,0],[1561696560000,1.1365,1.136525,1.136475,1.13648,0],[1561696620000,1.136475,1.13648,1.13647,1.136475,0],[1561696680000,1.13648,1.13653,1.13648,1.136525,0],[1561696740000,1.13653,1.136555,1.136475,1.136485,0],[1561696800000,1.13648,1.13648,1.13647,1.136475,0],[1561696860000,1.13647,1.136505,1.13647,1.13649,0],[1561696920000,1.136495,1.136515,1.136475,1.136475,0],[1561696980000,1.13648,1.136505,1.13648,1.136485,0],[1561697040000,1.13649,1.13649,1.136475,1.136475,0],[1561697100000,1.13647,1.13647,1.13637,1.13637,0],[1561697160000,1.136365,1.136425,1.136365,1.13642,0],[1561697220000,1.136425,1.136445,1.13637,1.136425,0],[1561697280000,1.13643,1.136505,1.136425,1.136475,0],[1561697340000,1.13647,1.136475,1.136445,1.13647,0],[1561697400000,1.136475,1.136515,1.13645,1.136455,0],[1561697460000,1.13645,1.136455,1.136445,1.136455,0],[1561697520000,1.13645,1.136475,1.13645,1.13647,0],[1561697580000,1.136475,1.136505,1.136435,1.13644,0],[1561697640000,1.136445,1.136485,1.136445,1.136485,0],[1561697700000,1.13649,1.136495,1.136415,1.13642,0],[1561697760000,1.136425,1.136425,1.136415,1.13642,0],[1561697820000,1.136415,1.136425,1.136375,1.136375,0],[1561697880000,1.13638,1.13642,1.13638,1.136395,0],[1561697940000,1.13639,1.13639,1.13633,1.136365,0],[1561698000000,1.13636,1.136385,1.136265,1.136325,0],[1561698060000,1.13632,1.136385,1.136315,1.13637,0],[1561698120000,1.136365,1.1364,1.136365,1.13638,0],[1561698180000,1.136385,1.136425,1.13638,1.136425,0],[1561698240000,1.13643,1.13643,1.136295,1.136305,0],[1561698300000,1.13631,1.136335,1.13623,1.13625,0],[1561698360000,1.136255,1.13629,1.13624,1.13625,0],[1561698420000,1.136255,1.136275,1.13624,1.136245,0],[1561698480000,1.13625,1.13628,1.136245,1.136275,0],[1561698540000,1.13627,1.136305,1.136265,1.136265,0],[1561698600000,1.13627,1.136275,1.136265,1.136265,0],[1561698660000,1.13626,1.136265,1.136235,1.136265,0],[1561698720000,1.13627,1.13628,1.136265,1.136275,0],[1561698780000,1.13627,1.13627,1.136265,1.136265,0],[1561698840000,1.13627,1.136325,1.136265,1.13627,0],[1561698900000,1.136265,1.136275,1.136265,1.136265,0],[1561698960000,1.13626,1.136275,1.136235,1.136275,0],[1561699020000,1.13628,1.136315,1.13627,1.13627,0],[1561699080000,1.136265,1.136275,1.136225,1.136275,0],[1561699140000,1.13627,1.136275,1.13624,1.13624,0],[1561699200000,1.136245,1.13632,1.136245,1.136275,0],[1561699260000,1.13627,1.13632,1.13626,1.13631,0],[1561699320000,1.136315,1.136355,1.1363,1.13633,0],[1561699380000,1.136325,1.136325,1.136265,1.136275,0],[1561699440000,1.13627,1.136275,1.13624,1.13624,0],[1561699500000,1.136245,1.136255,1.13622,1.13622,0],[1561699560000,1.136225,1.13625,1.13622,1.13625,0],[1561699620000,1.136245,1.136245,1.13622,1.136225,0],[1561699680000,1.13622,1.136225,1.13622,1.13622,0],[1561699740000,1.136225,1.136245,1.13622,1.13623,0],[1561699800000,1.136225,1.13625,1.13622,1.136225,0],[1561699860000,1.13622,1.13623,1.13622,1.136225,0],[1561699920000,1.13622,1.136265,1.136215,1.13624,0],[1561699980000,1.136235,1.136265,1.136225,1.13624,0],[1561700040000,1.136245,1.13628,1.13624,1.13627,0],[1561700100000,1.136275,1.1363,1.13622,1.13622,0],[1561700160000,1.136215,1.136225,1.136165,1.13622,0],[1561700220000,1.136225,1.13623,1.13619,1.136225,0],[1561700280000,1.13622,1.13622,1.136175,1.136185,0],[1561700340000,1.13618,1.136185,1.13608,1.13614,0],[1561700400000,1.136135,1.13615,1.136125,1.13615,0],[1561700460000,1.136145,1.13616,1.136085,1.136085,0],[1561700520000,1.13609,1.136105,1.13607,1.136095,0],[1561700580000,1.13609,1.136145,1.13609,1.136135,0],[1561700640000,1.13614,1.136285,1.136135,1.136285,0],[1561700700000,1.13628,1.136295,1.13624,1.13625,0],[1561700760000,1.136255,1.13634,1.13625,1.136335,0],[1561700820000,1.13634,1.13636,1.13629,1.13629,0],[1561700880000,1.136295,1.136335,1.136295,1.136305,0],[1561700940000,1.13631,1.13631,1.13626,1.136285,0],[1561701000000,1.13629,1.13629,1.13619,1.136195,0],[1561701060000,1.13619,1.136245,1.13619,1.136225,0],[1561701120000,1.13622,1.136225,1.136185,1.136195,0],[1561701180000,1.1362,1.13622,1.13619,1.13621,0],[1561701240000,1.136205,1.136245,1.13619,1.1362,0],[1561701300000,1.136195,1.136245,1.13618,1.136245,0],[1561701360000,1.13624,1.136365,1.13624,1.13635,0],[1561701420000,1.136345,1.13635,1.13625,1.136265,0],[1561701480000,1.13627,1.13634,1.136265,1.136325,0],[1561701540000,1.13632,1.13638,1.136305,1.136355,0],[1561701600000,1.13635,1.136355,1.136305,1.13635,0],[1561701660000,1.136355,1.1365,1.13635,1.136445,0],[1561701720000,1.13644,1.136545,1.13637,1.136505,0],[1561701780000,1.1365,1.136605,1.13649,1.136595,0],[1561701840000,1.1366,1.1366,1.136505,1.13652,0],[1561701900000,1.136515,1.136605,1.13648,1.136605,0],[1561701960000,1.13661,1.13663,1.13644,1.136445,0],[1561702020000,1.13645,1.13654,1.136405,1.136525,0],[1561702080000,1.13652,1.13658,1.136495,1.136525,0],[1561702140000,1.13652,1.136585,1.13649,1.136585,0],[1561702200000,1.13658,1.136645,1.136475,1.13649,0],[1561702260000,1.136495,1.13658,1.136485,1.136565,0],[1561702320000,1.13656,1.136625,1.136545,1.13662,0],[1561702380000,1.136615,1.136675,1.136585,1.13666,0],[1561702440000,1.136665,1.136685,1.136625,1.136685,0],[1561702500000,1.13668,1.13671,1.1366,1.136695,0],[1561702560000,1.13669,1.136705,1.136605,1.136695,0],[1561702620000,1.1367,1.13679,1.13669,1.1367,0],[1561702680000,1.136695,1.136705,1.136595,1.136605,0],[1561702740000,1.1366,1.136645,1.136595,1.13664,0],[1561702800000,1.136645,1.136685,1.136575,1.13664,0],[1561702860000,1.136645,1.136685,1.136585,1.13663,0],[1561702920000,1.136635,1.13664,1.136625,1.13664,0],[1561702980000,1.13663,1.136695,1.136595,1.136655,0],[1561703040000,1.13665,1.136755,1.136645,1.1367,0],[1561703100000,1.136695,1.136785,1.136695,1.13674,0],[1561703160000,1.136745,1.13675,1.136685,1.136735,0],[1561703220000,1.13674,1.13685,1.13674,1.136845,0],[1561703280000,1.13684,1.13698,1.136815,1.136905,0],[1561703340000,1.13691,1.136985,1.13688,1.136925,0],[1561703400000,1.13693,1.137065,1.136925,1.137035,0],[1561703460000,1.13704,1.1371,1.136915,1.136985,0],[1561703520000,1.13698,1.137055,1.136965,1.136975,0],[1561703580000,1.13697,1.13698,1.136805,1.136925,0],[1561703640000,1.13693,1.136985,1.1369,1.136935,0],[1561703700000,1.13693,1.136945,1.136885,1.136925,0],[1561703760000,1.13692,1.136985,1.136855,1.136985,0],[1561703820000,1.13698,1.136985,1.13691,1.136935,0],[1561703880000,1.13693,1.137,1.136925,1.13698,0],[1561703940000,1.136975,1.137035,1.136905,1.137035,0],[1561704000000,1.13703,1.137085,1.13698,1.13704,0],[1561704060000,1.137045,1.137095,1.13703,1.137045,0],[1561704120000,1.13704,1.13714,1.137035,1.137135,0],[1561704180000,1.13713,1.13716,1.137095,1.13711,0],[1561704240000,1.137105,1.137205,1.137085,1.137195,0],[1561704300000,1.13719,1.1372,1.137085,1.13709,0],[1561704360000,1.1371,1.13783,1.1371,1.13763,0],[1561704420000,1.137625,1.137625,1.13743,1.13754,0],[1561704480000,1.137535,1.137575,1.13739,1.13754,0],[1561704540000,1.137535,1.13765,1.137515,1.137615,0],[1561704600000,1.13761,1.137695,1.137575,1.13767,0],[1561704660000,1.137675,1.13773,1.13759,1.137605,0],[1561704720000,1.13761,1.13762,1.137485,1.13752,0],[1561704780000,1.137515,1.13754,1.137465,1.13747,0],[1561704840000,1.137465,1.13747,1.13737,1.1374,0],[1561704900000,1.137405,1.13764,1.137405,1.137635,0],[1561704960000,1.13764,1.13767,1.13754,1.13761,0],[1561705020000,1.137615,1.13774,1.137615,1.137635,0],[1561705080000,1.137645,1.137765,1.137645,1.13775,0],[1561705140000,1.137745,1.13784,1.137715,1.137835,0],[1561705200000,1.13784,1.137955,1.137815,1.137845,0],[1561705260000,1.13785,1.13814,1.137825,1.138095,0],[1561705320000,1.138085,1.138125,1.137985,1.138025,0],[1561705380000,1.13802,1.138355,1.13802,1.138335,0],[1561705440000,1.13834,1.13845,1.138195,1.138415,0],[1561705500000,1.13842,1.138475,1.13832,1.138355,0],[1561705560000,1.13836,1.138375,1.13821,1.13827,0],[1561705620000,1.138265,1.13833,1.13825,1.1383,0],[1561705680000,1.138295,1.138295,1.138165,1.138225,0],[1561705740000,1.13823,1.138325,1.13812,1.13822,0],[1561705800000,1.138225,1.13836,1.13822,1.13836,0],[1561705860000,1.138365,1.138475,1.1383,1.138465,0],[1561705920000,1.13847,1.13852,1.13829,1.138325,0],[1561705980000,1.13833,1.13843,1.1383,1.138355,0],[1561706040000,1.13836,1.138575,1.138345,1.13847,0],[1561706100000,1.138465,1.13857,1.138385,1.13841,0],[1561706160000,1.138405,1.139045,1.138405,1.13868,0],[1561706220000,1.138675,1.13889,1.138625,1.138825,0],[1561706280000,1.13882,1.138965,1.1388,1.138815,0],[1561706340000,1.13881,1.13886,1.138695,1.13871,0],[1561706400000,1.138715,1.138715,1.138605,1.138615,0],[1561706460000,1.13861,1.13883,1.138605,1.138755,0],[1561706520000,1.13876,1.13889,1.13871,1.138765,0],[1561706580000,1.13876,1.138765,1.138575,1.13862,0],[1561706640000,1.138625,1.138815,1.138625,1.13874,0],[1561706700000,1.138735,1.138865,1.138735,1.13886,0]]},"onchart":[],"offchart":[]};
                              //return {"chart":{"type":"Candles","chartName":"Our chart name from api","settings":{},"data":[[1561706700000,1.138735,1.138865,1.138735,1.13886,0]]},"onchart":[],"offchart":[]};
                              //return [];
                              //return {"meta":{"markers":["isEnd"]},"chart":{"type":"Candles","chartName":"Our chart name from api","settings":{},"data":[]},"onchart":[],"offchart":[]};
                              return await this.$store.dispatch(
                                      'chart/getChartSlice',
                                      {
                                            id: this.algoId,
                                            anchorTime,
                                            numberOfDataPoints,
                                            direction,
                                      }
                              );
                        } catch (error) {
                              this.$toasted.error("getSlice: there was an error connecting to the server.");
                        }
                  },

                  subscribe(onLiveData, lastDataTimestamp) {
                        // TODO: pass last fetched element back to sub_chart in case something got emitted between our response was compiled and when we subed?:
                        window.console.log(`   - SUBBING, have last data: ${lastDataTimestamp}`);

                        // $socket is socket.io-client instance
                        this.sockets.subscribe('data', data => {
                              window.console.log(`   - GOT  LIVE DATA: ${JSON.stringify(data)}`);

                              if (data.hasOwnProperty('chartName')) {
                                    this.chartName = data.chartName;
                                    delete data.chartName;
                              }

                              onLiveData(data);
                        });
                        this.$socket.emit('sub_chart', this.algoId, lastDataTimestamp);
                  },

                  unsubscribe() {
                        window.console.log(`   - UNNNSUBBING`);
                        this.$socket.emit('unsub_chart', this.algoId);
                        this.sockets.unsubscribe('data');
                  },

                  clickButton(data) {
                        // $socket is socket.io-client instance
                        this.$socket.emit('emit_method', data)
                  },
                  //sub: function (chartId) {
                        // $socket is socket.io-client instance
                        //this.$socket.on(chartId, data => {
                                      //console.log(`GOT DATA: ${JSON.stringify(data.chart)}`);

                                      //this.chartName = data.chartName;
                                      //this.$set(this, 'chart', data.chart);
                              //const latestTime = data.chart.chart.data[data.chart.chart.data.length - 1][0];
                              //this.$refs.tradingVue.goto(latestTime);
                              //console.log(i)
                              //this.$emit('scroll-lock', true)
                                      //});

                        // subscribe us to $chartId events:
                        //      this.$socket.emit('sub_chart', chartId)
                  //}
                  ...mapMutations('common', [
                        'SET_FOOTER_VISIBILITY',
                  ]),
            },
            // all keys under here will be topics we subscribe to (and will be automatically unsubscribed on unmount):
            sockets: {
                  // note connect is also filed on re-connections, so do not subscribe to rooms/events in here!
                  connect() {
                        console.log('socket connected');
                        this.notify('socket connected')
                  },
                  chart(data_) {
                        this.notify('chart update via SOCK');

                        // received update for main chart:
                        // TODO: do we have/want to call .set() on very first init, or can go with merge()? note no add() for 'chart';
                        //data.{id,meta,data}

                        const {data, conf} = data_;

                        // TODO: where do we set chart type??

                        this.chartName = conf.chartName;
                        //console.log(JSON.stringify(this.dc.data));
                        if (isEmpty(this.dc.data.chart.settings)) {
                              this.dc.set('chart.settings', conf.settings);
                              this.dc.data.chart.type = conf.type;  // assuming type won't change later on
                              //console.log('kek YESSS' + JSON.stringify(conf));
                        } else {
                              this.dc.merge('chart.settings', conf.settings);
                              //
                              // console.log('kekNO ' + JSON.stringify(conf));
                        }

                        this.dc.merge('chart.data', data);  // TODO: DC should start truncating ends on merge


                        //const latestTime = data.chart.chart.data[data.chart.chart.data.length - 1][0];
                        //this.$refs.tradingVue.goto(latestTime);
                        //console.log(i)
                        //this.$emit('scroll-lock', true)
                  },
                  onchart(data_) {
                        this.notify('onchart update via SOCK');

                        // received update for main chart:
                        // TODO: do we have/want to call .set() on very first init, or can go with merge()? note no add() for 'chart';
                        //data.{id,meta,data}

                        const {data, meta} = data_;
                        console.log(JSON.stringify(this.dc.data));
                        if (isEmpty(this.dc.data.chart.settings)) {
                              this.dc.set('chart.settings', meta);
                              console.log('kek YESSS' + JSON.stringify(meta));
                        } else {
                              this.dc.merge('chart.settings', meta);
                              console.log('kekNO ' + JSON.stringify(meta));
                        }
                        this.dc.merge('chart.data', data);
                  },
                  //offchart(data_) {
            },
            created() {
                  this.algoId = this.$route.query.id;
                  this.oldFooterVisibility = this.showFooter;

                  if (this.oldFooterVisibility) {  // if footer is shown, hide it
                        this.SET_FOOTER_VISIBILITY(false);
                  }
            },
            mounted() {
                  this.notify('we are mounted');

                  this.navbar = document.getElementById('navbar-container');  // TODO: this should be a getter in common.js instead!
                  if (this.showFooter) this.footer = document.getElementById('footer-main');

                  this.onResize();

                  // we listen for the readystatechange because otherwise the chart won't be
                  // resized to correct height in case we load the page directly with chart,
                  // as the header height+margins haven't properly set yet, thus outerHeight() lies:
                  document.onreadystatechange = () => {
                        if (document.readyState === 'complete') this.onResize();
                  };
                        //document.addEventListener('readystatechange', () => {
                        //      if (document.readyState === 'complete') this.onResize();
                        //});

                  window.addEventListener('resize', this.onResize);

                  this.chart.setDataHandlers({
                        initData: this.getTail,
                        loadForRange: this.getSlice,
                        subscribe: this.subscribe,
                        unsubscribe: this.unsubscribe,
                  })
            },
            beforeDestroy() {
                  this.$socket.emit('unsub_chart', this.algoId);
                  window.removeEventListener('resize', this.onResize);
                  this.SET_FOOTER_VISIBILITY(this.oldFooterVisibility);  // restore footer visibility

                  // note this is an example of manually managing subscription-unsubscription:
                  //this.sockets.unsubscribe(chartId);
            },
            data() {
                  // TODO: think no point in setting this.dc, it's accessible via this.chart anyways
                  this.dc = new DataCube({
                        chart: {
                              name: 'myassetchart',  // TODO: 'name' is not used by tv is it?
                              data: []
                        },
                        onchart: [],
                        offchart: []
                  });
                  window.dc = this.dc;  // for debug
                  return {
                        chart: this.dc,
                        chartName: 'Waiting for downlink...',
                        //chart: Data,
                        width: window.innerWidth,
                        height: 0,
                        //colors: {
                              //colorBack: '#fff',
                              //colorGrid: '#eee',
                              //colorText: '#333',
                        //},
                        night: true
                  };
            },
            computed: {
                  colors() {
                        return this.night ? {} : {
                              colorBack: '#fff',
                              colorGrid: '#eee',
                              colorText: '#333'
                        }
                  },
                  ...mapState({
                        showFooter: state => state.common.showFooter,
                  }),
            },
      };
</script>

<style lang="scss" scoped>
      .chart-view {
            background-color: #000;
            margin: 0;
            padding: 0;
            overflow: hidden;
            height: 100%;
            width: 100%;
      }
      .night-mode {
            position: absolute;
            top: 10px;
            right: 70px;
            color: #888;
            font: 11px -apple-system,BlinkMacSystemFont,
            Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,
            Fira Sans,Droid Sans,Helvetica Neue,
            sans-serif
      }
</style>

